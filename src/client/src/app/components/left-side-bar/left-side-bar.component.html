<section class="left-side-bar desktop">
  <div class="sidebar">
    <div [class]="open ? 'open ' : '' ">
      <div class="logo-details">
        <i class='bx bxl-c-plus-plus icon' (click)='toggleMenu()'></i>
      </div>
      <ul #leftSidebar class="nav-list">
        <drag-scroll class="nav-list-drag" [scrollbar-hidden]="true" [drag-scroll-x-disabled]="true">
          <li *ngFor="let item of menu">
            <div [pTooltip]="open ? '' : 'menu.'+item.key+'_tooltip'  | translate " (click)="handleMenu(item)"
                 [class]="item.show ? 'menu-active' : ''">
              <i class='{{item.icon}}'></i>
              <span class="links_name">{{'menu.' + item.key | translate}}</span>
            </div>
          </li>
        </drag-scroll>
      </ul>
      <ul class="nav-list footer">
        <div class="footer-drag">
          <li>
            <div [pTooltip]="open ? '' : 'menu.filters_tooltip'  | translate " (click)="handleMenu({key: 'filters'})"
                 [class]="displayFilter ? 'menu-active' : ''">
              <i class='fg-map-search'></i>
              <span class="links_name">{{'menu.filters'  | translate}}</span>
            </div>
          </li>
          <li (click)="handleLang('pt')">
            <div [class]="lang == 'pt' ? 'lng lng-active' : 'lng'">
              <span class="lng_name">PT</span>
            </div>
            <span class="tooltip">Filtrar</span>
          </li>
          <li (click)="handleLang('en')">
            <div [class]="lang == 'en' ? 'lng lng-active' : 'lng'">
              <span class="lng_name">EN</span>
            </div>
          </li>
        </div>
      </ul>
    </div>
  </div>
  <p-sidebar
    [appendTo]="leftSidebar"
    [modal]="false"
    [transitionOptions]="'350ms cubic-bezier(0, 0, 0.2, 1)'"
    [(visible)]="layersSideBar"
    (onShow)="onSideBarShow()"
    (visibleChange)="onSideBarToggle.emit(layersSideBar)"
  >
    <h4 class="title">{{ layersTitle }}</h4>
    <div class="content" [style]="{width: '100%', height: innerHeigth + 'px'}">
      <div class="menu-item" *ngIf="currentMenu?.key == 'layers'">
        <div *ngFor="let group of descriptor.groups">
          <div [class]="group.group_expanded ? 'group-card group-card-active' :'group-card'">
            <div (click)="group.group_expanded = !group.group_expanded" class="abstract">
              <span>
                <i class='bx bxs-layer'></i>
                <div class="group-label">{{group.label}}</div>
              </span>
              <i [class]="group.group_expanded ? 'bx bxs-up-arrow-circle' :'bx bxs-down-arrow-circle'"></i>
            </div>
            <div class="details">
              <div class="details-inner">
                <div *ngFor="let layer of group.layers; let i = index" class="layer-card">
                  <div class="layer-card-header">
                    <p-inputSwitch [(ngModel)]="layer.visible"></p-inputSwitch>
                    <h5>{{layer.label}}</h5>
                    <i class='bx bxs-info-circle' ></i>
                  </div>
                  <div class="layer-card-body">
                    <div class="layer-card-thumbnail">
                      <img alt="{{layer.label}}" src="https://ows.lapig.iesa.ufg.br/ows?SERVICE=WMS&REQUEST=GetMap&VERSION=1.1.1&layers=uso_solo_terraclass,regions_cepf_realce_maior&bbox=-53.2607485164173,-19.45694323783,-45.8974523191428,-12.3861700574049&TRANSPARENT=TRUE&srs=EPSG:4674&width=400&height=400&format=image/png&styles=&ENHANCE=TRUE&MSFILTER=uf%20ilike%20%27go%27&MSREGION=type=%27uf%27%20and%20text%20ilike%20%27go%27">
                    </div>
                    <div class="layer-card-content">
                      <div *ngIf="layer.hasOwnProperty('types')">
                        <span class="p-float-label">
                          <p-dropdown id="types-{{i}}" *ngIf="layer.types.length > 0" [options]="layer.types" [(ngModel)]="layer.selectedType" optionLabel="Viewvalue" optionValue="value"></p-dropdown>
                          <label for="types-{{i}}">{{layer.typeLabel}}</label>
                        </span>
                        <span *ngIf="layer.types.hasOwnProperty('times')" class="p-float-label">
                          <p-dropdown id="types-times-{{i}}" *ngIf="layer.types.times.length > 0" [options]="layer.types.times" [(ngModel)]="layer.timeSelected" optionLabel="Viewvalue" optionValue="value"></p-dropdown>
                          <label for="types-times-{{i}}">{{layer.timeLabel}}</label>
                        </span>
                      </div>
                      <span class="p-float-label" *ngIf="layer.hasOwnProperty('times')">
                          <p-dropdown id="times-{{i}}" *ngIf="layer.times.length > 0" [options]="layer.times" [(ngModel)]="layer.timeSelected" optionLabel="Viewvalue" optionValue="value"></p-dropdown>
                          <label for="times-{{i}}">{{layer.timeLabel}}</label>
                      </span>
                      <div class="ol-layer-options-transparency">
<!--                        <input (mousemove)="onChangeTransparency()" class="range" type="range" min="0" max="100" [(ngModel)]="layerOpacity">-->
                        <input  class="range" type="range" min="0" max="100" >
                        <br> <span>Transparência</span>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="menu-item" *ngIf="currentMenu?.key == 'statistics'">
      </div>
      <div class="menu-item" *ngIf="currentMenu?.key == 'area'">
      </div>
      <div class="menu-item" *ngIf="currentMenu?.key == 'filters'">
        <p-autoComplete [(ngModel)]="textSearch" [suggestions]="results"
                        (completeMethod)="search($event)"></p-autoComplete>
      </div>
      <div class="menu-item" *ngIf="currentMenu?.key == 'options'" >

            <div  [class]="expendGroup ? 'group-card group-card-active' :'group-card'">
              <div (click)="expendGroup = !expendGroup" class="abstract">
                <h3>{{'options.basemaps' | translate}}</h3>
              </div>
              <div class="details">
                <div class="details-inner">
                    <div class="toggle" *ngFor="let map of mapaBase">
                      <p-inputSwitch styleClass="inputSwitchClass" (onChange)="onChangeBaseMap(map.key)"
                                     [(ngModel)]="map.checked"></p-inputSwitch>
                      <p class="inlineSwitchButton"> {{map.nome}} </p>
                      <br><br>
                    </div>
                </div>
              </div>
             </div>

            <div  [class]="expendGroup ? 'group-card group-card-active' :'group-card'">
              <div (click)="expendGroup = !expendGroup" class="abstract">
                <h3>{{'options.limits' | translate}}</h3>
              </div>
              <div class="details">
                <div class="details-inner">
                  <div class="toggle" *ngFor="let limite of Limites">
                    <p-inputSwitch [(ngModel)]="limite.checked"></p-inputSwitch>
                    <p class="inlineSwitchButton"> {{limite.nome}} </p>
                    <br>
                  </div>
                </div>
              </div>
             </div>
      </div>
    </div>
    <div class="footer">
      <div class="partners">
        <i class='bx bxl-c-plus-plus icon'></i>
        <i class='bx bxl-c-plus-plus icon'></i>
        <i class='bx bxl-c-plus-plus icon'></i>
      </div>
    </div>
  </p-sidebar>
</section>


<nav class="navtab mobile">

  <ul #leftSidebarMobile class="nav-list">
    <li class="navtab-item" *ngFor="let item of menuMobile" >

    <div align="center"  [pTooltip]="open ? '' : 'menu.'+item.key+'_tooltip'  | translate " (click)="handleMenu(item, true)"   >
        <i style="font-size:28px;width:90px;" class='svg {{item.icon}}'></i>
        <span class="links_name">{{'menu.' + item.key | translate}}</span>
      </div>

    </li>
  </ul>

</nav>


<p-sidebar [appendTo]="leftSidebarMobile" [modal]="false" [(visible)]="layersSideBarMobile"
           (onShow)="onSideBarShowMobile()">
  <h4 class="title">{{ layersTitle }}</h4>
  <p-scrollPanel class="content" [style]="{width: '100%', height: innerHeigth + 'px'}">
    <div class="menu-item" *ngIf="currentMenu?.key == 'layers'">
      <br>
      <p-accordion [multiple]="true">
        <p-accordionTab header="Produção Agrícola e Agropecuária">
          Content 1
        </p-accordionTab>
        <p-accordionTab header="Uso de Agrotóxicos">
          Content 2
        </p-accordionTab>
        <p-accordionTab header="Intoxicações por Agrotóxico de Uso Agrícola">
          Content 3
        </p-accordionTab>
        <p-accordionTab header="Comparações Brasil x União Europeia">
          Content 3
        </p-accordionTab>

      </p-accordion>
    </div>
    <div class="menu-item" *ngIf="currentMenu?.key == 'statistics'">

    </div>
    <div class="menu-item" *ngIf="currentMenu?.key == 'area'">

    </div>
    <div class="menu-item" *ngIf="currentMenu?.key == 'filters'">
      <p-autoComplete [(ngModel)]="textSearch" [suggestions]="results"
                      (completeMethod)="search($event)"></p-autoComplete>
    </div>
    <div class="menu-item" *ngIf="currentMenu?.key == 'options'">

    </div>
  </p-scrollPanel>
  <div class="footer">
    <div class="partners">
      <i class='bx bxl-c-plus-plus icon'></i>
      <i class='bx bxl-c-plus-plus icon'></i>
      <i class='bx bxl-c-plus-plus icon'></i>
    </div>
  </div>
</p-sidebar>


